<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>


    <div class="formulario">
        <form>
            
            <p> Usuario </p>
            <input type=text name="user" id="username">
            <p> Contraseña </p>
            <input type="password" name="pass" id="password"><br><br>
            <a href="./form.html">Registrarse</a>
            <input type="button" name="enter" value="Acceder" id="login">
            <label for="" id="cerrada" style="display:none">La sesión se cerró correctamente.</label>
        </form>
    </div>

    <script>

        if(document.referrer =="http://localhost/FormularioPufoSA/menu.html"){
            document.getElementById("cerrada").style.display = "";
        }

        document.getElementById("login").addEventListener("click",acceder);

        function acceder(){

        var username = document.getElementById("username").value;
        var password = document.getElementById("password").value;
        
        if(readCookie(username,password) == true){
            document.cookie = "login="+username;
            window.location.replace("http://localhost/FormularioPufoSA/menu.html");
        }
            
        }

        function readCookie(name,password){

            var valido = false;
            var cookies = document.cookie;
            var arrayCookies = document.cookie.split(";");
            var claveValor = [];
            arrayCookies.forEach(element => {
                claveValor.push(element.split("="));
            });
            
           for(let i = 0; i<claveValor.length;i++){
               if(claveValor[i][0] == name && claveValor[i][1] == password){
                   valido = true;
               }
           }
            return valido;
        }
        
    </script>




</body>

</html>